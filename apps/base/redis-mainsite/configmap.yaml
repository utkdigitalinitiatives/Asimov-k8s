apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-mainsite-config
  namespace: redis-mainsite
data:
  redis.conf: |
    # Redis configuration
    bind 0.0.0.0
    port 6379

    # Persistence
    appendonly yes
    appendfsync everysec

    # Memory management
    maxmemory 400mb
    maxmemory-policy allkeys-lru

    # Security
    protected-mode no
    # Password set via command line arg

    # Performance
    tcp-keepalive 300
    timeout 0
